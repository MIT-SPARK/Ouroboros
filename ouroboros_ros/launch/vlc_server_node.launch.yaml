---
launch:
  - arg: {name: show_plots, default: 'false'}
  - arg: {name: lc_send_delay_s, default: '15.0'}
  - arg: {name: vlc_frame_period_s, default: '0.5'}
  - arg: {name: robot_id, default: '0'}
  - arg: {name: fixed_frame, default: world}
  - arg: {name: hint_body_frame, default: base_link_gt}
  - arg: {name: body_frame, default: base_link_gt}
  - arg: {name: camera_frame, default: left_cam}
  - arg: {name: vlc_config_path, default: $(find-pkg-share ouroboros_ros)/config/vlc_server_config.yaml}
  - node:
      pkg: ouroboros_ros
      exec: vlc_server_node.py
      name: vlc_server_node
      output: screen
      param:
        - {name: show_plots, value: $(var show_plots)}
        - {name: lc_send_delay_s, value: $(var lc_send_delay_s)}
        - {name: vlc_frame_period_s, value: $(var vlc_frame_period_s)}
        - {name: robot_id, value: $(var robot_id)}
        - {name: fixed_frame, value: $(var fixed_frame)}
        - {name: hint_body_frame, value: $(var hint_body_frame)}
        - {name: body_frame, value: $(var body_frame)}
        - {name: camera_frame, value: $(var camera_frame)}
        - {name: config_path, value: $(var vlc_config_path)}
      remap:
        - {from: image_in, to: /tesse/left_cam/rgb/image_raw}
        - {from: camera_info, to: /tesse/left_cam/camera_info}
        - {from: depth_in, to: /tesse/depth_cam/mono/image_raw}

  - arg: {name: launch_rviz, default: 'true', description: automatically start rviz}
  - arg: {name: rviz_path, default: $(find-pkg-share ouroboros_ros)/rviz/ouroboros_debug.rviz, description: rviz file to load}
  - node: {if: $(var launch_rviz), name: rviz, pkg: rviz2, exec: rviz2, args: -d $(var rviz_path)}
